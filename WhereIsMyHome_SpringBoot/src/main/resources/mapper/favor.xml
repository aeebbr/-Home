<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.favor.dto.mapper.FavorMapper">

	<resultMap type="favorDto" id="favor">
		<result column="user_id" property="userId" />
		<result column="sidoCode" property="sidoCode" />
		<result column="guguncode" property="gugunCode" />
		<result column="dongcode" property="dongCode" />
		<result column="sidoName" property="sidoName" />
		<result column="gugunName" property="gugunName" />
		<result column="dongName" property="dongName" />
	</resultMap>

	<insert id="insertFavor" parameterType="map">
		insert into favor(user_id, sidoCode, guguncode, dongcode, sidoName,
		gugunName, dongName, join_date)
		select #{userId}, #{sidoCode}, #{gugunCode}, #{dongCode}, #{sidoName},
		#{gugunName}, #{dongName}, now()
		from dual
		where not exists(select * from favor where user_id = #{userId} and dongcode
		= #{dongCode})
	</insert>

	<select id="listFavor" parameterType="String" resultType="favor">
		select * from favor where user_id = #{userId} order by id
	</select>

	<delete id="deleteFavor" parameterType="String">
	delete from favor where id = #{id}
	</delete>

</mapper>