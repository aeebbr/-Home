<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.favor.dto.mapper.FavorMapper">

	<resultMap type="favorDto" id="favor">
		<result column="favorno" property="id" />
		<result column="userid" property="userId" />
		<result column="dongcode" property="dongCode" />
		<result column="sidoname" property="sidoName" />
		<result column="gugunname" property="gugunName" />
		<result column="dongname" property="dongName" />
	</resultMap>

	<insert id="insertFavor" parameterType="map">
		insert into favor(userid, dongcode, sidoname,
		gugunname, dongname, joindate)
		select #{userId}, #{dongCode}, #{sidoName},
		#{gugunName}, #{dongName}, now()
		from dual
		where not exists(select * from favor where userid = #{userId} and dongcode
		= #{dongCode})
	</insert>

	<select id="listFavor" parameterType="String" resultMap="favor">
		select * from favor where userid = #{userId} order by favorno
	</select>

	<delete id="deleteFavor" parameterType="String">
	delete from favor where favorno = #{id}
	</delete>

</mapper>